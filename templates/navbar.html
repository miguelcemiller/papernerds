{% load static %}


<header>
    <div class="navbar">
        <a href="{% url 'landing' %}">
            <img class="logo" src="{% static 'images/papernerds.svg'%}" alt="Papernerds" title="Papernerds" style="display: block;">
        </a>

        {% if request.get_full_path == '/' %}
        
        <!-- nothing -->
        
        {% else %}
        <form id="search_form" class="search_container" action="" method="GET">
            <input name="search" class="search_text" type="text" id="input" placeholder="Search...">
            <button class="search_btn">
                <img src="{% static 'images/search.svg'%}" >
            </button>
        </form>
        {% endif %}

    
        {% if request.user.is_authenticated %}
        <div class="profile_nav">
            <div class="profile_container">
                <img class="profile_image" src="{% static 'images/profiles/headshot.png'%}" alt="">
                <div class="profile_name">{{ request.user.first_name }}</div>
            </div>
            <ul class="hide">
                <li><a href="#">Profile</a></li>
                <li><a href="{% url 'logout' %}">Logout</a></li>
            </ul>
        </div>
        
        {% else %}
        <div class="cta_container">
            <a href="{% url 'login' %}"><button class="btn btn_secondary">Sign In</button></a>
            <div class="hamburger">
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
            </div>
        </div>
        {% endif %}
    </div>  

</header>


<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

<script type="text/javascript">
    $('.profile_container').click(function(e) {
        e.stopPropagation();
       $('.profile_nav > ul').toggleClass('hide');
    });

    $('body').on('click', function() { 
        $('.profile_nav > ul').addClass('hide');
    });

</script>
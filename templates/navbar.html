{% load static %}


<header>
    <div class="search_modal_overlay">
        <div class="search_modal">
            <div class="search_modal_back">&#10094;</div>
            <form class="search_modal_form" action="{% url 'results' %}" method="GET">
                <input name="search" class="search_modal_text" type="text" id="input" placeholder="Search...">
                <button class="search_modal_btn">
                    <img src="{% static 'images/search.svg'%}" >
                </button>
            </form>
        </div>
    </div>
   
    <div class="navbar">
        <a href="{% url 'landing' %}">
            <img class="logo" src="{% static 'images/papernerds.svg'%}" alt="Papernerds" title="Papernerds" style="display: block;">
        </a>

        {% if request.get_full_path == '/' %}
        
        <!-- nothing -->
        
        {% else %}
        <form id="search_form" class="navbar_search search_container" action="{% url 'results' %}" method="GET">
            <input name="search" class="search_text" type="text" id="input" placeholder="Search...">
            <button class="search_btn">
                <img src="{% static 'images/search.svg'%}" >
            </button>
        </form>
        <div class="search_btn_alt_wrapper">
            <button class="search_btn_alt">
                <img src="{% static 'images/search_alt.svg'%}" >
            </button>
        </div>
        
        {% endif %}

    
        {% if request.user.is_authenticated %}
        <div class="profile_nav">
            <div class="profile_container">
                <img class="profile_image" src="{% static 'images/profiles/headshot.png'%}" alt="">
                <div class="profile_name">{{ request.user.first_name }}</div>
            </div>
            <ul class="profile_dropdown hide_dropdown">
                <li><a href="#">Profile</a></li>
                <li><a href="{% url 'logout' %}">Logout</a></li>
            </ul>
        </div>
        
        {% else %}
        <div class="cta_container">
            <a href="{% url 'login' %}"><button class="btn btn_secondary">Sign In</button></a>
            <div class="hamburger">
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
            </div>
        </div>
        {% endif %}
    </div>  

</header>


<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

<script type="text/javascript">

    // Profile Container Dropdown
    $('.profile_container').click(function(e) {
        e.stopPropagation();
        $('.profile_dropdown').toggleClass('hide_dropdown');
    });

    $('body').on('click', function() { 
       $('.profile_dropdown').addClass('hide_dropdown');
    });

    // Search Modal Overlay 
    $('.search_btn_alt_wrapper').click(function(e) {
        $('.search_modal_overlay').css('display', 'flex');
        $('body').css('overflow-y', 'hidden'); // Disable vertical scroll on body
    });

    $(".search_modal_back").on("click", function() {
        $(".search_modal_overlay").css("display", "none");
        $('body').css('overflow-y', 'auto'); // Enable vertical scroll on body
    });

    $(".search_modal_overlay").on("click", function() { // When overlay (dark) is click
        $(".search_modal_overlay").css("display", "none");
        $('body').css('overflow-y', 'auto'); // Enable vertical scroll on body
    });

     $(".search_modal").on("click", function(e) { // Disable click on search modal
         e.stopPropagation();
    });


</script>